# Protocol

`모든 패킷 데이터는 char 타입`

## Orange Pi -> ESP32

| SOF | P_ID | DATA      | EOF | 설명      | 정상 데이터 범위                 | 주기  |
|-----|------|-----------|-----|-----------|----------------------------------|-------|
| (   | N    | R,P,Z,Y   | )   | 목 제어   | R = -5.000 ~ 5.000 <br></br> P = -5.000 ~ 5.000 <br></br> Z = 60 ~ 100 <br></br> Y = -5.000 ~ 5.000 | 미정 |
| (   | E    | 감정 코드 | )   | 감정 상태 | "0" : NULL <br></br> "1" : close <br></br> "2" : moving <br></br> "3" : wink <br></br> "4" : angry <br></br> "5" : sad <br></br> "6" : daily | 미정 |
/
## ESP32 -> Orange Pi

| SOF | P_ID | DATA            | EOF | 설명        | 정상 데이터 범위 | 주기  |
|-----|------|-----------------|-----|-------------|------------------|-------|
| <   | T    | 쓰담            | >   | 쓰담 감지   | 1 : touch <br></br> 0 : no touch | Event |
| <   | C    | ppm             | >   | CO농도      | 20~2000          | 1초   |
| <   | D    | mm              | >   | 측정거리    | 30~4500          | 100ms |
| <   | B    | 잔량, 남은 시간 | >   | 배터리 상태 | "90%, 1h 20m" | 1초   |

## ESP32_SUB -> ESP32

- 배터리 잔량 계산은 ESP_S에서


| SOF | P_ID | DATA | EOF | 설명 | 정상 데이터 범위 | 주기 |
|-----|------|------|-----|------|------------------|------|
| *   | B    | 잔량   | *   | 배터리 상태 | "90%" | 1초 |
| *   | BD   | 시간   | *   | 배터리 지속 시간 | "1h 20m" | 1초 |
| *   | D    | mm   | *   | 측정 거리 | 30~4500 | 100ms |
| *   | G    | GPS coordinates | * | GPS 위치 | (Latitude, Longitude) | Variable based on GPS fix |

